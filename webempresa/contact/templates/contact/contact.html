{% extends 'core/base.html' %}

{% load static %}

{% block title %}Contacto{% endblock %}

{% block content %}
<section class="page-section about-heading">
  <div class="container">
    <img class="img-fluid rounded about-heading-img mb-3 mb-lg-0" src="{% static 'core/img/contact.jpg' %}" alt="">
    <div class="about-heading-content">
      <div class="row">
        <div class="col-xl-9 col-lg-10 mx-auto">
          <div class="bg-faded rounded p-5">
            <h2 class="section-heading mb-4">
              <span class="section-heading-upper">Envíanos tus dudas</span>
              <span class="section-heading-lower">Contacto</span>
            </h2>
            <!-- Formulario de contacto --> 
            {% if 'ok' in request.GET %} {# Si la clave es ok se encuentra definida en el diccionario request.GET que es el hemos pasado por url o arriba  con ese ok  #}
              <p><b>Su mensaje se ha enviado correctamente, en breve nos pondremos en contacto con ested.</b></p> {# si ok está mostraremos un mensaje   #}
            {% endif %}

            {% if 'fail' in request.GET %} {# Si la clave es fail se encuentra definida en el diccionario request.GET que es el hemos pasado por url o arriba  con ese fail  #}
              <p><b>Ha ocurrido un error y su mensaje NO se ha enviado correctamente, favor de intentarlo nuevamente en unos momentos.</b></p> {# si fail está mostraremos el mensaje   #}
            {% endif %}
            <!--
            <form action="" method="POST">  {# método post para más seguridad de proteccion de datos enviados,  accion en "" dice que estamos enviando en la misma página los datos #} 
              {% csrf_token %} {# es el token aleatorio, código generado para evitar que otras páginas puedan dar inputs a nuestro formulario, el TT genera este tag: <input type="hidden" name="csrfmiddlewaretoken" value="gi8bPMUpZr6iL4SC9Bfp5o6irw3tWob5UMIt4pPyUdjSdxDB2lzPy75uEhMEARqG">  #}
              <table>
                {{form.as_table}}{# con esto dibujamos el form que recién creamos, .as_p muestra el formulario por paragrafos, saltos de línea grandes. o com si estuviesen dentro de la etiqueta <p></p>, y {{form.as_ul}} encerrado de <li></li> muestra los campos en una lista -------- y finalmente usando {{form.as_table}} entre <table></table> nos ordenará el formulario como una tabla, quizá es la mejor forma de acomodar todo como tabla por mostrar todo alineado de forma correcta. #}
              </table>
               <input type="submit" value="Enviar" />
            </form>
            -->

            {#{{request.POST}}#} {# ES un diccionario en donde se almacenarán los datos POST que son envíados a través del formulario, los muestra en este formato:  #}

            <form action="" method="POST">  <!-- adaptado -->
              {% csrf_token %} {# adaptado #}
                <div class="form-group">
                    <label>Nombre *</label>
                    <div class="input-group">
                      {{form.name}} {# con esta variable accedemos al campo nombre del formulario #}
                    </div>
                    {{form.name.errors}} {# Es el control de errores del campo name #}
                </div>
                <div class="form-group">
                    <label>Email *</label>
                    <div class="input-group">
                      {{form.email}} {# con esta variable accedemos al campo email del formulario #}
                    </div>
                    {{form.email.errors}}
                    <!--<ul class="errorlist">
                        <li>El email no es correcto.</li>
                    </ul> -->
                </div>
                <div class="form-group">
                    <label>Mensaje *</label>
                    <div class="input-group">
                      {{form.content}} {# con esta variable accedemos al campo contenido del formulario #}
                    </div>
                    {{form.content.errors}}
                </div>
                <div class="text-center">
                    <input type="submit" class="btn btn-primary btn-block py-2" value="Enviar">
                </div>
            </form> 
            <!-- Fin formulario de contacto -->
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
{% endblock %}
